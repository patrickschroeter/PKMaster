<pk-loading *ngIf="!conference"></pk-loading>

<div id="conference-detail" class="rel" *ngIf="conference">
    <h2 class="element element--spacing-bottom-small" i18n>Conference: {{ conference.description }}</h2>
    <h4 class="element element--spacing-bottom-large">{{ conference.dateOfEvent | date }} ({{ conference.startOfEvent }} - {{ conference.endOfEvent }}), {{ conference.roomOfEvent }}</h4>

    <h4 i18n>Attendant PK-Members</h4>
    <ng-container *ngIf="!conference.assignments || !conference.assignments.length">
        <div class="empty-wrapper">
            <div class="label" i18n>No attendant members.</div>
            <pk-button
                class="element--spacing-top-large"
                element--secondary
                i18n-value
                value="Assign User"
                icon="supervisor_account"
                (onClick)="assignUserModal()">
            </pk-button>
        </div>
    </ng-container>
    <ng-container *ngIf="conference.assignments && conference.assignments.length">
        <pk-list>
            <pk-list-header>
                <pk-list-attribute name="name" i18n>Name</pk-list-attribute>
            </pk-list-header>
            <pk-list-content>
                <pk-list-element *ngFor="let user of conference.assignments">
                    <pk-list-attribute name="name">
                        {{ userLabels[user] }}
                    </pk-list-attribute>

                    <pk-floating top-right horizontal>
                        <pk-button
                            rounded
                            i18n-pkAlert
                            pkAlert="Delete Member from Conference"
                            icon="delete"
                            element--error
                            (onClick)="unassignUser(user)">
                        </pk-button>
                    </pk-floating>
                </pk-list-element>
            </pk-list-content>
        </pk-list>
    </ng-container>

    <h3 i18n>Agenda</h3>
    <div *ngFor="let item of conference.config; let i = index">
        {{ i + 1 }}. {{ item.title }}
    </div>

    <ng-container *ngIf="conference.config && conference.config.length">
        <ng-container *ngFor="let entry of conference.config; let index = index">
            <pk-conference-entry-detail [index]="index + 1" [entry]="entry"></pk-conference-entry-detail>
        </ng-container>
    </ng-container>

    <pk-floating fixed top-right>
        <a routerLink="/conferences">
            <pk-button
                class="element--spacing-bottom-tiny"
                rounded
                element--error
                i18n-pkAlert
                pkAlert="Back to Listview"
                icon="arrow_back">
            </pk-button>
        </a>
        <pk-button-animation-wrapper>
            <pk-button
                class="element--spacing-bottom-tiny"
                rounded
                element--secondary
                i18n-pkAlert
                pkAlert="Assign User"
                icon="supervisor_account"
                (onClick)="assignUserModal()">
            </pk-button>
            <a routerLink="/conferences/{{ conference.id }}/edit">
                <pk-button
                    class="element--spacing-bottom-tiny"
                    rounded
                    i18n-pkAlert
                    pkAlert="Edit Conference"
                    icon="create"
                    element--secondary>
                </pk-button>
            </a>
            <pk-button
                class="element--spacing-bottom-tiny"
                rounded
                element--error
                i18n-pkAlert
                pkAlert="Delete Conference"
                icon="delete"
                (onClick)="deleteConference()">
            </pk-button>
        </pk-button-animation-wrapper>
    </pk-floating>

    <pk-modal-accept-application #acceptModal></pk-modal-accept-application>
</div>
